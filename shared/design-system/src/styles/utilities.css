/* ==================================================
   UTILITY CLASSES
   Common layout patterns and helpers
   ================================================== */
@layer utilities {
  /* ===== CONTAINERS ===== */
  .container {
    width: min(100% - 2rem, var(--container-max));
    margin-inline: auto;
  }

  .container-narrow {
    width: min(100% - 2rem, var(--container-narrow));
    margin-inline: auto;
  }

  .container-wide {
    width: min(100% - 2rem, var(--container-wide));
    margin-inline: auto;
  }

  .container-fluid {
    width: 100%;
    padding-inline: var(--space-4);
  }

  /* ===== GRID SYSTEM ===== */
  .grid {
    display: grid;
    gap: var(--space-4);
  }

  .grid-cols-1 { grid-template-columns: repeat(1, 1fr); }
  .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
  .grid-cols-3 { grid-template-columns: repeat(3, 1fr); }
  .grid-cols-4 { grid-template-columns: repeat(4, 1fr); }
  .grid-cols-6 { grid-template-columns: repeat(6, 1fr); }
  .grid-cols-12 { grid-template-columns: repeat(12, 1fr); }

  /* Span utilities */
  .col-span-1  { grid-column: span 1; }
  .col-span-2  { grid-column: span 2; }
  .col-span-3  { grid-column: span 3; }
  .col-span-4  { grid-column: span 4; }
  .col-span-6  { grid-column: span 6; }
  .col-span-8  { grid-column: span 8; }
  .col-span-12 { grid-column: span 12; }
  .col-full    { grid-column: 1 / -1; }

  /* Auto-fit grid (for cards) */
  .grid-auto {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: var(--space-5);
  }

  /* Gap utilities */
  .gap-0 { gap: var(--space-0); }
  .gap-1 { gap: var(--space-1); }
  .gap-2 { gap: var(--space-2); }
  .gap-3 { gap: var(--space-3); }
  .gap-4 { gap: var(--space-4); }
  .gap-5 { gap: var(--space-5); }
  .gap-6 { gap: var(--space-6); }

  /* ===== FLEXBOX ===== */
  .flex {
    display: flex;
  }

  .flex-col {
    flex-direction: column;
  }

  .flex-wrap {
    flex-wrap: wrap;
  }

  .items-center {
    align-items: center;
  }

  .items-start {
    align-items: flex-start;
  }

  .items-end {
    align-items: flex-end;
  }

  .justify-center {
    justify-content: center;
  }

  .justify-between {
    justify-content: space-between;
  }

  .justify-end {
    justify-content: flex-end;
  }

  /* ===== LAYOUT PRIMITIVES ===== */

  /* Stack: Vertical spacing */
  .stack > * + * {
    margin-top: var(--space-4);
  }

  .stack-sm > * + * {
    margin-top: var(--space-2);
  }

  .stack-lg > * + * {
    margin-top: var(--space-6);
  }

  /* Cluster: Horizontal wrapping with gap */
  .cluster {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-3);
    align-items: center;
  }

  /* Center: Max-width with auto margins */
  .center {
    box-sizing: content-box;
    max-width: var(--measure, 66ch);
    margin-inline: auto;
    padding-inline: var(--space-4);
  }

  /* Row: Horizontal flex with gap */
  .row {
    display: flex;
    gap: var(--space-4);
    align-items: center;
  }

  /* ===== CARDS ===== */
  .card {
    background: var(--color-surface);
    border: 1px solid var(--color-surface-border);
    border-radius: var(--radius-3);
    box-shadow: var(--shadow-1);
    padding: var(--space-5);
  }

  .card:hover {
    box-shadow: var(--shadow-2);
  }

  /* ===== SPACING UTILITIES ===== */

  /* Padding */
  .p-0 { padding: var(--space-0); }
  .p-1 { padding: var(--space-1); }
  .p-2 { padding: var(--space-2); }
  .p-3 { padding: var(--space-3); }
  .p-4 { padding: var(--space-4); }
  .p-5 { padding: var(--space-5); }
  .p-6 { padding: var(--space-6); }

  /* Padding inline (left/right) */
  .px-0 { padding-inline: var(--space-0); }
  .px-1 { padding-inline: var(--space-1); }
  .px-2 { padding-inline: var(--space-2); }
  .px-3 { padding-inline: var(--space-3); }
  .px-4 { padding-inline: var(--space-4); }
  .px-5 { padding-inline: var(--space-5); }
  .px-6 { padding-inline: var(--space-6); }

  /* Padding block (top/bottom) */
  .py-0 { padding-block: var(--space-0); }
  .py-1 { padding-block: var(--space-1); }
  .py-2 { padding-block: var(--space-2); }
  .py-3 { padding-block: var(--space-3); }
  .py-4 { padding-block: var(--space-4); }
  .py-5 { padding-block: var(--space-5); }
  .py-6 { padding-block: var(--space-6); }

  /* Margin */
  .m-0 { margin: var(--space-0); }
  .m-1 { margin: var(--space-1); }
  .m-2 { margin: var(--space-2); }
  .m-3 { margin: var(--space-3); }
  .m-4 { margin: var(--space-4); }
  .m-5 { margin: var(--space-5); }
  .m-6 { margin: var(--space-6); }

  /* ===== DISPLAY ===== */
  .hidden {
    display: none;
  }

  .block {
    display: block;
  }

  .inline {
    display: inline;
  }

  .inline-block {
    display: inline-block;
  }

  /* ===== ACCESSIBILITY ===== */

  /* Screen reader only */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  .sr-only:focus,
  .sr-only:active {
    position: static;
    width: auto;
    height: auto;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }

  /* Skip link */
  .skip-link {
    position: absolute;
    top: -40px;
    left: 0;
    background: var(--color-accent);
    color: var(--color-bg);
    padding: var(--space-2) var(--space-4);
    border-radius: var(--radius-2);
    z-index: var(--z-tooltip);
    font-weight: 600;
  }

  .skip-link:focus {
    top: var(--space-2);
  }

  /* ===== BORDERS ===== */
  .border {
    border: 1px solid var(--color-surface-border);
  }

  .border-t {
    border-top: 1px solid var(--color-surface-border);
  }

  .border-b {
    border-bottom: 1px solid var(--color-surface-border);
  }

  /* ===== BORDER RADIUS ===== */
  .rounded-0 { border-radius: var(--radius-0); }
  .rounded-1 { border-radius: var(--radius-1); }
  .rounded-2 { border-radius: var(--radius-2); }
  .rounded-3 { border-radius: var(--radius-3); }
  .rounded-4 { border-radius: var(--radius-4); }
  .rounded-full { border-radius: var(--radius-full); }

  /* ===== SHADOWS ===== */
  .shadow-0 { box-shadow: var(--shadow-0); }
  .shadow-1 { box-shadow: var(--shadow-1); }
  .shadow-2 { box-shadow: var(--shadow-2); }
  .shadow-3 { box-shadow: var(--shadow-3); }
  .shadow-4 { box-shadow: var(--shadow-4); }

  /* ===== BACKGROUNDS ===== */
  .bg-surface {
    background: var(--color-surface);
  }

  .bg-hover {
    background: var(--color-surface-hover);
  }

  /* ===== POSITION ===== */
  .relative {
    position: relative;
  }

  .absolute {
    position: absolute;
  }

  .fixed {
    position: fixed;
  }

  .sticky {
    position: sticky;
  }

  /* ===== MISC ===== */
  .pointer {
    cursor: pointer;
  }

  .visually-focusable:focus-visible {
    outline: 2px solid var(--color-focus-ring);
    outline-offset: 2px;
  }
}
